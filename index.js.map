{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/constants.ts","webpack:///./src/utils.ts","webpack:///./src/converter.ts","webpack:///./src/index.ts","webpack:///./src/decorator.ts","webpack:///./src/property.ts","webpack:///./node_modules/secure-template/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","CURRENT_PATH","DEFAULT_PROPERTY_SEP","DEFAULT_PROPERTY_SOURCE","PROPERTIES_KEY","isNil","validAssign","source","dest","undefined","pushByOrder","array","item","selector","index","length","element","splice","push","isValid","isNaN","Date","valueOf","constants_1","utils_1","SYSTEM_TYPES","String","Boolean","Number","SYSTEM_CONVERTERS","map","src","constuctor","options","instance","sourceName","properties","defaultProperties","useDefaultSource","Array","isArray","slice","forEach","findIndex","order","getProperties","result","resolvePath","convert","error","console","assign","[object Object]","default","getConverter","type","indexOf","decorator_1","mapping","converter_1","property_1","target","warn","opts","Property","from","secure_template_1","this","domain","path","join","Reflect","designType","getMetadata","resolve","e","__read","iterator","u","next","done","return","trim","split","f","match","a","exec","TypeError","replace","sort","defaultReplace","format","compile"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","export const CURRENT_PATH = \".\";\nexport const DEFAULT_PROPERTY_SEP = \".\";\nexport const DEFAULT_PROPERTY_SOURCE = \"default\";\nexport const PROPERTIES_KEY = Symbol(\"PROPERTIES_KEY\");\n","export function validAssign(source: any, dest: any) {\n    source = source || {};\n    for (const key in dest) {\n        if (dest[key] !== undefined) {\n            source[key] = dest[key];\n        }\n    }\n    return source;\n}\n\nexport function pushByOrder<T>(array: T[], item: T, selector: (item: T) => any) {\n    for (let index = 0, length = array.length; index < length; index++) {\n        const element = array[index];\n        if (selector(item) < selector(element)) {\n            array.splice(index, 0, item);\n            return;\n        }\n    }\n    return array.push(item);\n}\n\nexport function isNil(value: any) {\n    return value === null || value === undefined;\n}\n\nexport function isValid(value: any) {\n    if (isNil(value)) {\n        return false;\n    } else if (value !== value && isNaN(value)) {\n        return false;\n    } else if (value instanceof Date && isNaN(value.valueOf())) {\n        return false;\n    } else {\n        return true;\n    }\n}\n","import { DEFAULT_PROPERTY_SOURCE, PROPERTIES_KEY } from \"./constants\";\nimport { IConverter, IMappingOptions, PropertyType } from \"./interface\";\nimport { Property } from \"./property\";\nimport { isNil, isValid, pushByOrder } from \"./utils\";\n\nconst SYSTEM_TYPES: Array<PropertyType<any>> = [String, Boolean, Number, Date];\n\nconst SYSTEM_CONVERTERS: Array<IConverter<any>> = [\n  (value) => isValid(value) ? String(value) : value,\n  (value) => isNil(value) ? undefined : Boolean(value),\n  (value) => isNil(value) ? undefined : Number(value),\n  (value) => isValid(value) ? new Date(value) : value,\n];\n\nexport function getConverter<T>(type?: PropertyType<T>): IConverter<T> {\n  if (typeof type === \"function\") {\n    if (type.prototype && PROPERTIES_KEY in type.prototype) {\n      return (value: any, src: any, dest: T, options?: IMappingOptions) => map(value, type as any, options);\n    } else {\n      const index = SYSTEM_TYPES.indexOf(type);\n      if (index >= 0) {\n        return SYSTEM_CONVERTERS[index];\n      } else {\n        return type as any;\n      }\n    }\n  } else {\n    return (value: any) => value;\n  }\n}\n\nfunction getProperties<T>(constuctor: any, options?: IMappingOptions) {\n  const sourceName = options && options.source || DEFAULT_PROPERTY_SOURCE;\n  const properties: Record<string, Array<Property<T>>> = constuctor.prototype[PROPERTIES_KEY];\n  if (!properties || !(sourceName in properties)) {\n    return [];\n  }\n  let defaultProperties = properties[DEFAULT_PROPERTY_SOURCE];\n  if (sourceName !== DEFAULT_PROPERTY_SOURCE) {\n    const useDefaultSource = (options && options.useDefaultSource) !== false;\n    if (useDefaultSource && Array.isArray(defaultProperties)) {\n      defaultProperties = defaultProperties.slice();\n      properties[sourceName].forEach((p) => {\n        const index = defaultProperties.findIndex((m) => p.name === m.name);\n        if (index >= 0) {\n          defaultProperties.splice(index, 1);\n        }\n        pushByOrder(defaultProperties, p, (m) => m.order);\n      });\n    } else {\n      return properties[sourceName];\n    }\n  }\n  return defaultProperties;\n}\n\n/**\n * Map an object to an instance of the specified type.\n * @param src Data source object.\n * @param constuctor The type of instance, the constructor function of the class.\n * @param options Mapping options.\n */\nexport function map<T extends new (...args: any[]) => any\n>(src: any, constuctor: T, options?: IMappingOptions): InstanceType<T> | null {\n  const instance = new constuctor();\n  if (src === undefined || src === null || typeof src !== \"object\") {\n    return null;\n  }\n  const properties = getProperties(constuctor, options);\n  properties.forEach((property) => {\n    let result;\n    try {\n      const value = property.resolvePath(src);\n      result = property.convert(value, src, instance, options);\n    } catch (error) {\n      console.error(error);\n    }\n    if (isValid(result)) {\n      Object.assign(instance, { [property.name]: result });\n    } else if (\"default\" in property) {\n      Object.assign(instance, { [property.name]: property.default });\n    }\n  });\n  return instance;\n}\n","export { mapping } from \"./decorator\";\nexport { map } from \"./converter\";\n","import { PROPERTIES_KEY } from \"./constants\";\r\nimport { IConverter, IProperty } from \"./interface\";\r\nimport { Property } from \"./property\";\r\nimport { pushByOrder } from \"./utils\";\r\n\r\n/**\r\n * The required annotations for object mapping which can only be used on instance properties.\r\n * @param options mapping options\r\n */\r\nexport function mapping<T = any>(options?: IProperty<T> | IConverter<T>) {\r\n    return function(target: any, name: string) {\r\n        if (typeof target === \"function\") {\r\n            console.warn(\"Mapping static members is not allowed, it is a dangerous operation.\");\r\n            return;\r\n        }\r\n        const opts: IProperty<T> = options || {} as any;\r\n        const property = Property.from(opts, target, name);\r\n        const properties = target[PROPERTIES_KEY] || {};\r\n        properties[property.source] = properties[property.source] || [];\r\n        pushByOrder(properties[property.source], property, (item) => item.order);\r\n        target[PROPERTIES_KEY] = properties;\r\n    };\r\n}\r\n","import { resolve } from \"secure-template\";\nimport { CURRENT_PATH, DEFAULT_PROPERTY_SEP, DEFAULT_PROPERTY_SOURCE } from \"./constants\";\nimport { getConverter } from \"./converter\";\nimport { IMappingOptions, IProperty, PropertyType } from \"./interface\";\nimport { isValid, validAssign } from \"./utils\";\n\nexport class Property<T> implements IProperty<T> {\n  public static from<T>(options: IProperty<T>, target: any, name: string) {\n    options = typeof options === \"function\" ? { type: options } : options;\n    const property = new Property();\n    property.name = name;\n    validAssign(property, options);\n    if (options.domain) {\n      if (!options.path) {\n        // The option domain will be ignored when used with path.\n        property.path = [options.domain, name].join(DEFAULT_PROPERTY_SEP);\n      }\n    }\n    property.path = property.path || name;\n    if (!property.type && typeof Reflect === \"object\" && \"getMetadata\" in Reflect) {\n      const designType = (Reflect as any).getMetadata(\"design:type\", target, name);\n      property.type = designType === Array ? [] : designType;\n    }\n    return property;\n  }\n  public path: string;\n  public type: PropertyType<T>;\n  public source: string = DEFAULT_PROPERTY_SOURCE;\n  public default: any;\n  public order: number = 0;\n  public name: string;\n\n  public resolvePath(src: any) {\n    if (this.path === CURRENT_PATH) {\n      return src;\n    } else {\n      return resolve(this.path, src);\n    }\n  }\n\n  public convert(value: any, src: any, dest: T, options?: IMappingOptions) {\n    if (Array.isArray(this.type)) {\n      if (!isValid(value)) {\n        return value;\n      }\n      const convert = getConverter(this.type[0]);\n      value = Array.isArray(value) ? value : [value];\n      value = value.map((item: any) => convert(item, src, dest, options));\n    } else {\n      const convert = getConverter(this.type);\n      value = convert(value, src, dest, options);\n    }\n    return value;\n  }\n}\n","!function(e,r){for(var t in r)e[t]=r[t]}(exports,function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&r&&\"string\"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,\"a\",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p=\"\",t(t.s=0)}([function(e,r,t){\"use strict\";var n=this&&this.__read||function(e,r){var t=\"function\"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,o,i=t.call(e),u=[];try{for(;(void 0===r||r-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return u};function o(e,r){if(\"string\"==typeof e&&r){for(var t=e.trim().split(\".\"),o=0,i=t.length;o<i;o++){var u=t[o],f=u.match(/^([^\\[]+)((\\[(\\d+)\\])+)$/);if(f){var l=n(f,3),a=l[1],c=l[2];r=r[a];for(var p=/((?<=\\[)(\\d+)(?=\\]))+/g,s=p.exec(c);null!=s;){var d=Number(s[0]);if(!(Array.isArray(r)&&d<r.length))return;r=r[d],s=p.exec(c)}}else{if(void 0===r[u])break;r=r[u]}}return o===i?r:void 0}}function i(e){return[void 0,null].indexOf(e)>=0||isNaN(e)&&e!=e?\"\":\"string\"==typeof e?e.trim():String(e)}function u(e,r){if(\"string\"!=typeof e)throw new TypeError(\"The template must be a string.\");for(var t=[],u=/({*)((?<={)\\S+?(?!=\\\\)(?=}))(}*)/g,f=u.exec(e),l=function(){var l=n(f,4),a=l[0],c=l[1],p=l[2],s=l[3];1===c.length||1===s.length?t.push([f.index,a,function(e,t){var n=o(p,e),u=(t=t||r||i)(n);return c.replace(\"{\",\"\")+u+s.replace(\"}\",\"\")}]):t.push([f.index,a,function(){return c.replace(\"{{\",\"{\")+p+s.replace(\"}}\",\"}\")}]),f=u.exec(e)};null!=f;)l();return function(r,o){if(!r)return e;var i=e.split(\"\");return t.sort(function(e,r){return r[0]-e[0]}).forEach(function(e){var t=n(e,3),u=t[0],f=t[1],l=(0,t[2])(r,o);i.splice(u,f.length,l)}),i.join(\"\")}}Object.defineProperty(r,\"__esModule\",{value:!0}),r.resolve=o,r.defaultReplace=i,r.format=function(e,r,t){return u(e,t)(r)},r.compile=u}]));\n//# sourceMappingURL=index.js.map"],"sourceRoot":""}